import{d as z,u as L,i as Q,r as m,G as k,s as b,o as V,H as N,a as p,c as d,b as e,F as g,n as w,g as H,e as T,t as f,l as u,p as A,h as B,I as O,_ as X}from"./index.9cc2b5a6.js";function R(h){return new Promise(function(_,q){let y=!1,a=document.querySelector('script[src="'+h+'"]');if(!a)a=document.createElement("script"),a.type="text/javascript",a.async=!0,a.src=h,y=!0;else if(a.hasAttribute("data-loaded")){_(a);return}a.addEventListener("error",q),a.addEventListener("abort",q),a.addEventListener("load",function(){a.setAttribute("data-loaded",!0),_(a)}),y&&document.head.appendChild(a)})}const x=[{title:"Example Select Query",shortTitle:"Basic Select",description:"This is a basic example of a select query, which lists the first 10 triples.",query:`PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
SELECT *
WHERE {
    ?s ?p ?o .
} LIMIT 10`},{title:"Example Construct Query",shortTitle:"Basic Construct",description:"This is a basic example of a construct query, which constructs a graph of the first 10 triples.",query:`PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
CONSTRUCT {
    ?s ?p ?o .
}
WHERE {
    ?s ?p ?o .
} LIMIT 10`},{title:"VocPrez Counting Concepts",shortTitle:"Concept Count",description:"Here is an example query for VocPrez you can copy 'n paste into the Query UI text area above to test with. It counts the number of vocabulary Concepts in the all vocabularies in this system and will return an integer: ",query:`PREFIX skos: <http://www.w3.org/2004/02/skos/core#>

SELECT (COUNT(?c) AS ?count)
WHERE {
    ?c a skos:Concept .
}`},{title:"SpacePrez Basic Feature Information",shortTitle:"Feature Info",description:"Here is an example query for SpacePrez for use in the Query UI above. It returns most two Features' URIs and their titles.",query:`PREFIX dcterms: <http://purl.org/dc/terms/>
PREFIX geo: <http://www.opengis.net/ont/geosparql#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>

SELECT ?uri ?title
WHERE {
    ?uri a geo:Feature ;
        dcterms:title|rdfs:label ?title .
}
LIMIT 2`}],c=h=>(A("data-v-e84e7757"),h=h(),B(),h),U=c(()=>e("h1",null,"SPARQL Endpoint",-1)),j=c(()=>e("p",null,[u("Here you can perform more advanced querying using "),e("a",{href:"https://www.w3.org/TR/sparql11-query/",target:"_blank",rel:"noopener noreferrer"},"SPARQL"),u(" (SPARQL Protocol and RDF Query Language). This page acts both as an interactive querying page as well as an endpoint for clients.")],-1)),J={class:"query-option"},M=c(()=>e("div",{class:"query-option-title"},"Endpoint",-1)),G=["selected"],$=["selected"],D=["selected"],W=["selected"],K={key:0,class:"query-option"},Y=c(()=>e("div",{class:"query-option-title"},"Results Format",-1)),Z=["value","selected"],ee={key:1,class:"query-option"},te=c(()=>e("div",{class:"query-option-title"},"Results Format",-1)),ae=["value","selected"],se={class:"query-option"},le=c(()=>e("div",{class:"query-option-title"},"Examples",-1)),oe={class:"example-buttons"},re=["onClick"],ne=c(()=>e("div",{id:"yasqe"},null,-1)),ie=c(()=>e("div",{id:"yasr"},null,-1)),ue=c(()=>e("h2",null,"Example Queries",-1)),ce={class:"code-btns"},pe=["onClick"],de=["onClick"],ve=c(()=>e("i",{class:"fa-regular fa-copy"},null,-1)),he=z({__name:"SparqlView",setup(h){const _=[{label:"Turtle",value:"text/turtle"},{label:"N-Triples",value:"application/n-triples"},{label:"RDF/XML",value:"application/rdf+xml"},{label:"TriG",value:"application/trig"},{label:"N-Quads",value:"application/n-quads"},{label:"CSV",value:"text/csv"},{label:"TSV",value:"text/tab-separated-values"}],q=[{label:"JSON",value:"application/sparql-results+json"},{label:"XML",value:"application/sparql-results+xml"},{label:"CSV",value:"text/csv"},{label:"TSV",value:"text/tab-separated-values"}],y=L(),a=Q("config").apiBaseUrl,s=m(null),E=m(null),o=m("all"),v=m(null),n=m("text/turtle"),i=m("application/sparql-results+json"),C=m(null),I=k(()=>o.value==="catprez"?a+"/c/sparql":o.value==="spaceprez"?a+"/s/sparql":o.value==="vocprez"?a+"/v/sparql":"https://dbpedia.org/sparql");b(I,r=>{s.value&&(s.value.options.requestConfig.endpoint=r),localStorage.setItem("prez_sparql_options",JSON.stringify({selectedEndpoint:o.value,graphFormat:n.value,selectFormat:i.value}))}),b(n,r=>{s.value&&(s.value.options.requestConfig.acceptHeaderGraph=r),localStorage.setItem("prez_sparql_options",JSON.stringify({selectedEndpoint:o.value,graphFormat:n.value,selectFormat:i.value}))}),b(i,r=>{s.value&&(s.value.options.requestConfig.acceptHeaderSelect=r),localStorage.setItem("prez_sparql_options",JSON.stringify({selectedEndpoint:o.value,graphFormat:n.value,selectFormat:i.value}))}),V(()=>{y.rightNavConfig={enabled:!1},document.title="SPARQL | Prez",y.pageHeading={name:"Prez",url:"/"},y.breadcrumbs=[{name:"SPARQL",url:"/sparql"}];const r=localStorage.getItem("prez_sparql_options");if(r){const l=JSON.parse(r);o.value=l.selectedEndpoint,n.value=l.graphFormat,i.value=l.selectFormat}else localStorage.setItem("prez_sparql_options",JSON.stringify({selectedEndpoint:o.value,graphFormat:n.value,selectFormat:i.value}));R("https://unpkg.com/@triply/yasqe/build/yasqe.min.js").then(()=>{N(()=>{s.value=new Yasqe(document.getElementById("yasqe"),{showQueryButton:!0,resizeable:!1,requestConfig:{endpoint:I.value,method:"GET",adjustQueryBeforeRequest:l=>`# ${v.value==="SELECT"||v.value==="ASK"?i.value:n.value}
${l.getValue()}`}}),s.value.options.requestConfig.acceptHeaderGraph=n.value,s.value.options.requestConfig.acceptHeaderSelect=i.value,v.value=s.value.getQueryType()})}),R("https://unpkg.com/@triply/yasr/build/yasr.min.js").then(()=>{E.value=new Yasr(document.getElementById("yasr")),E.value.config.prefixes=s.value.getPrefixesFromQuery(),s.value.on("change",l=>{v.value=l.getQueryType()}),s.value.on("query",(l,t)=>{E.value.config.prefixes=l.getPrefixesFromQuery()}),s.value.on("queryResponse",(l,t,S)=>{E.value.setResponse(t,S)})})});function F(r){O(s.value).setValue(r),s.value.saveQuery()}function P(r){navigator.clipboard.writeText(r.trim())}return(r,l)=>(p(),d(g,null,[U,j,e("div",{id:"query-options",ref_key:"queryOptionsElement",ref:C},[e("div",J,[M,e("select",{name:"endpoint",id:"endpoint",onChange:l[0]||(l[0]=t=>o.value=t.target.value)},[e("option",{value:"all",selected:o.value==="all"},"All",8,G),e("option",{value:"catprez",selected:o.value==="catprez"},"CatPrez",8,$),e("option",{value:"spaceprez",selected:o.value==="spaceprez"},"SpacePrez",8,D),e("option",{value:"vocprez",selected:o.value==="vocprez"},"VocPrez",8,W)],32)]),v.value==="SELECT"||v.value==="ASK"?(p(),d("div",K,[Y,e("select",{name:"select-format",id:"select-format",onChange:l[1]||(l[1]=t=>i.value=t.target.value)},[(p(),d(g,null,w(q,t=>e("option",{value:t.value,selected:i.value===t.value},f(t.label),9,Z)),64))],32)])):v.value==="CONSTRUCT"||v.value==="DESCRIBE"?(p(),d("div",ee,[te,e("select",{name:"graph-format",id:"graph-format",onChange:l[2]||(l[2]=t=>n.value=t.target.value)},[(p(),d(g,null,w(_,t=>e("option",{value:t.value,selected:n.value===t.value},f(t.label),9,ae)),64))],32)])):H("",!0),e("div",se,[le,e("div",oe,[(p(!0),d(g,null,w(T(x),t=>(p(),d("button",{class:"btn sm outline",onClick:S=>F(t.query)},f(t.shortTitle),9,re))),256))])])],512),ne,ie,ue,(p(!0),d(g,null,w(T(x),t=>(p(),d("div",null,[e("h3",null,f(t.title),1),e("p",null,f(t.description),1),e("pre",null,[u("            "),e("code",null,f(t.query.trim()),1),u(`
            `),e("div",ce,[u(`
                `),e("button",{class:"code-btn",title:"Load into SPARQL editor",onClick:S=>{C.value.scrollIntoView({behavior:"smooth"}),F(t.query)}},`
                    Load
                `,8,pe),u(`
                `),e("button",{class:"code-btn",title:"Copy",onClick:S=>P(t.query)},[u(`
                    `),ve,u(`
                `)],8,de),u(`
            `)]),u(`
        `)])]))),256))],64))}});const ye=X(he,[["__scopeId","data-v-e84e7757"]]);export{ye as default};
