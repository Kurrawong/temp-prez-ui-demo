import{d as P,r as m,s as J,a as l,c as s,b as o,v as j,x as K,w as R,l as v,t as k,e as g,R as W,F as u,n as z,f as A,y as E,g as I,z as X,_ as T,i as Y,u as Z,k as q,j as ee,o as te,D as le,m as oe,p as ae,h as se}from"./index.bc5573fc.js";import{P as re}from"./PropTable.89944bcc.js";const ne={class:"concept-top"},ce={key:1,class:"concept-left"},ie=P({__name:"ConceptComponent",props:{baseUrl:String,iri:String,title:String,link:String,children:Array,collapseAll:Boolean,narrower:Array,broader:String},setup(b){const t=b,f=m(!0);return J(()=>t.collapseAll,(h,_)=>{f.value=h}),(h,_)=>{const p=X("ConceptComponent",!0);return l(),s(u,null,[o("div",ne,[t.children?(l(),s("button",{key:0,class:"concept-left btn outline",onClick:_[0]||(_[0]=y=>f.value=!f.value)},[o("i",{class:j(`fa-regular fa-${f.value?"plus":"minus"}`)},null,2)])):(l(),s("div",ce)),K(g(W),{class:"concept",to:t.link},{default:R(()=>[v(k(t.title),1)]),_:1},8,["to"])]),t.children?(l(),s("div",{key:0,class:j(`concept-children ${f.value?"collapse":""}`)},[(l(!0),s(u,null,z(t.children,y=>(l(),A(p,E(y,{baseUrl:t.baseUrl,collapseAll:t.collapseAll}),null,16,["baseUrl","collapseAll"]))),256))],2)):I("",!0)],64)}}});const ue=T(ie,[["__scopeId","data-v-e8a81d25"]]),C=b=>(ae("data-v-d58d18c9"),b=b(),se(),b),pe=["href"],de={key:0},ve=C(()=>o("th",null,"Concepts",-1)),fe=C(()=>o("i",{class:"fa-regular fa-chevron-down"},null,-1)),he=C(()=>o("i",{class:"fa-regular fa-chevron-up"},null,-1)),_e=C(()=>o("i",{class:"fa-regular fa-plus"},null,-1)),be=C(()=>o("i",{class:"fa-regular fa-minus"},null,-1)),me=P({__name:"VocabView",setup(b){const{namedNode:t}=le,f=Y("config").apiBaseUrl,h=oe(),_=Z(),{store:p,prefixes:y,parseIntoStore:L,qname:c}=q(),{data:D,profiles:F,loading:O,error:U,doRequest:H}=ee(),M=["http://www.w3.org/1999/02/22-rdf-syntax-ns#type","http://www.w3.org/2004/02/skos/core#hasTopConcept","http://purl.org/dc/terms/identifier","http://www.w3.org/2004/02/skos/core#definition","http://www.w3.org/2004/02/skos/core#prefLabel","http://www.w3.org/2000/01/rdf-schema#member"],V=m([]),r=m({}),$=m([]),S=m(!0),x=m(!0);te(()=>{H(`${f}/v/vocab/${h.params.vocabId}`,()=>{L(D.value);const d=p.value.getSubjects(t(c("a")),t(c("skos:ConceptScheme")))[0];r.value.iri=d.id,p.value.forEach(a=>{a.predicate.value===c("skos:prefLabel")?r.value.title=a.object.value:a.predicate.value===c("skos:definition")&&(r.value.description=a.object.value),a.predicate.annotations=p.value.getQuads(a.predicate,null,null),V.value.push(a)},d,null,null),_.rightNavConfig={enabled:!0,profiles:F,currentUrl:h.path},document.title=`${r.value.title} | Prez`,_.pageHeading={name:"VocPrez",url:"/v"},_.breadcrumbs=[{name:"VocPrez",url:"/v"},{name:"Vocabs",url:"/v/vocab"},{name:r.value.title,url:h.path}]})});function G(){let d=[];p.value.forSubjects(e=>{let n={iri:e.id,narrower:[],broader:null};p.value.forEach(i=>{i.predicate.value===c("rdfs:label")?n.title=i.object.value:i.predicate.value===c("prez:link")?n.link=i.object.value:i.predicate.value===c("skos:narrower")?n.narrower.push(i.object.value):i.predicate.value===c("skos:broader")&&(n.broader=i.object.value)},e,null,null),d.push(n)},t(c("skos:inScheme")),t(r.value.iri));const a=p.value.getObjects(t(r.value.iri),t(c("skos:hasTopConcept"))).map(e=>e.id),w=p.value.getSubjects(t(c("skos:topConceptOf"),t(r.value.iri))).map(e=>e.id),Q=[...new Set([...a,...w])],B=d.reduce((e,n,i)=>(e[n.iri]=i,e),{});let N={children:[]};d.forEach(e=>{if(e.narrower.length>0&&e.narrower.forEach(n=>d[B[n]].broader=e.iri),Q.includes(e.iri)){N.children.push(e);return}if(e.broader){const n=d[B[e.broader]];n.children=[...n.children||[],e]}}),$.value=N.children}return(d,a)=>(l(),s(u,null,[o("h1",null,k(r.value.title),1),o("p",null,[v("Instance IRI: "),o("a",{href:r.value.iri,target:"_blank",rel:"noopener noreferrer"},k(r.value.iri),9,pe)]),r.value.description?(l(),s("p",de,k(r.value.description),1)):I("",!0),V.value.length>0?(l(),A(re,{key:1,properties:V.value,prefixes:g(y),hiddenPreds:M},{bottom:R(()=>[o("tr",null,[ve,o("td",null,[o("button",{id:"concept-hide-btn",class:"btn",onClick:a[0]||(a[0]=w=>{$.value.length===0&&G(),S.value=!S.value})},[S.value?(l(),s(u,{key:0},[v("Show "),fe],64)):(l(),s(u,{key:1},[v("Hide "),he],64))]),o("div",{class:j(`concepts ${S.value?"collapse":""}`)},[o("button",{id:"collapse-all-btn",onClick:a[1]||(a[1]=w=>x.value=!x.value),class:"btn"},[x.value?(l(),s(u,{key:0},[_e,v(" Expand all")],64)):(l(),s(u,{key:1},[be,v(" Collapse all")],64))]),(l(!0),s(u,null,z($.value,w=>(l(),A(ue,E(w,{baseUrl:g(h).path,collapseAll:x.value}),null,16,["baseUrl","collapseAll"]))),256))],2)])])]),_:1},8,["properties","prefixes"])):g(O)?(l(),s(u,{key:2},[v("loading...")],64)):g(U)?(l(),s(u,{key:3},[v("Network error: "+k(g(U)),1)],64)):I("",!0)],64))}});const ke=T(me,[["__scopeId","data-v-d58d18c9"]]);export{ke as default};
